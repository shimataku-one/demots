<!DOCTYPE html>
<html lang="jp">
<head>
  <title>FHtest</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" />
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
</head>
<body>
  <div class="container">
    <header>
      <div class="row">
        <h1 id="titleh1">Tracking&ConsentAPI検証</h1>
        <p><a href="index.html">←戻る</a></p>
      </div>
    </header>
  </div>

  <hr />

  <div class="container">
    <form action="https://go.takushimada.work/l/960882/2022-01-20/3sc?utm_source=shiro&utm_medium=display&utm_campaign=sample_promotion2020" method="post">
      <div class="col-sm-8 col-sm-offset-2">
        <div class="form-group">

          <label for="pardot_extra_field">Comments正</label>
          <input type="text" id="pardot_extra_field" name="pardot_extra_field">

          <label for="pi_extra_field">Comments</label>
          <input type="text" name="pi_extra_field" id="pi_extra_field" class="form-control">
        </div>
        <div class="form-group">
          <label for="lastname"><span class="label label-danger">必須</span> lastname</label>
          <input type="text" id="lastname" name="lastname" class="form-control" placeholder="例：シマタク" autofocus required />
        </div>
        <div class="form-group">
          <label for="email"><span class="label label-danger">必須</span>
            メールアドレス</label>
          <input type="email" id="email" name="email" class="form-control" placeholder="例：heroku@salesforce.com" required />
        </div>
        <div class="form-group">
          <label for="text1">
            <span class="label label-success">任意</span>テキスト</label>
          <input type="text1" id="text1" name="text1" class="form-control" placeholder="例：ああああ" />
        </div>

        <div class="form-group">
          <label for="job"><span class="label label-success">任意</span> 職業</label>
          <select id="job" name="job" class="form-control">
            <option value="">選択してください</option>
            <option value="Webデザイナー">Webデザイナー</option>
            <option value="Webディレクター">Webディレクター</option>
            <option value="フロントエンドエンジニア">
              フロントエンドエンジニア
            </option>
            <option value="バックエンドエンジニア">
              バックエンドエンジニア
            </option>
            <option value="ゴリラ">ゴリラ</option>
            <option value="その他">その他</option>
          </select>
        </div>
        <div class="form-group">
          <label><span class="label label-success">任意</span>
            学びたいこと（複数選択可）</label>
          <div class="checkbox">
            <label>
              <input type="checkbox" id="q1_html" name="q1" value="デザイン" />デザインについて
            </label>
          </div>
          <div class="checkbox">
            <label>
              <input type="checkbox" id="q2_html" name="q1" value="プログラミング" />プログラミングについて
            </label>
          </div>
          <div class="checkbox">
            <label>
              <input type="checkbox" id="q3_html" name="q1" value="マーケティング" />マーケティングについて
            </label>
          </div>
          <div class="checkbox">
            <label>
              <input type="checkbox" id="q4_html" name="q1" value="バナナ" />バナナについて
            </label>
          </div>
        </div>
        <button type="submit" class="btn btn-primary">送信する</button>
      </div>
    </form>
  </div>
  <hr />

  <div class="container">
    <footer>
      <p>
      <button type="button" id="show_banner_button" onClick="pdt('showConsentBanner')">
        Cookie Consent Settings
      </button>
      <button type="button" id="cookie_clear_button" onClick="pdt('clearTrackingCookies')">
        Cookie Clear
      </button>
      <button type="button" id="revokeConsent_button" onClick="pdt('revokeConsent')">
        revokeConsent
      </button>
      <button type="button" id="sendPageView_button" onClick="pdt('sendPageView')">
        sendPageView
      </button>
      <button type="button" id="setUrlView_button" onClick="pdt('set', 'url', 'https://settest.takushimada.work/'),pdt('set', 'title', 'たいとる')">
        SetURL
      </button>
      <button type="button" id="setUrlreferrer_button" onClick="pdt('set', 'referrer', 'https://setreferrer.takushimada.work/')">
        Setreferrer
      </button>
      <button type="button" id="setOptout_button" onClick="pdt('setOptIn', false)">
        Optout
      </button>
      <br>
      &copy; ShimaTaku.</p>
    </footer>
  </div>

  <script>
    var piDomain = 'go.takushimada.work'; // format of 'go.example.com'
    var piAId = 961882;
    var piCId = 133645;

    (function () {
      // The src value will now load pdt.js instead of pd.js
      var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//' + piDomain + '/pdt.js?aid=' + piAId;
      var c = document.getElementsByTagName('script')[0]; c.parentNode.insertBefore(s, c);
      // Initialize the queue
      window['pdt'] = window['pdt'] || function () { (window['pdt'].cq = window['pdt'].cq || []).push(arguments); };
    })();

    // Create an analytics tracker with the required information:
    // pdt('create', Account Engagement account ID + 1000, Account Engagement campaign ID + 1000, 'go.example.com');
    pdt('create', piAId, piCId, piDomain);
    // pdt("showConsentBanner");
    // pdt("setOptIn", true);

    // Setを使ってみよう！
    pdt('set', 'title', 'こんちくは！');
    // pdt('set', 'url', 'https://test.com/'); << CORSエラーになる
    pdt('set', 'url', 'https://test.takushimada.work/');
    // pdt('set', 'piEmail', 'consentapi5@test.com');
    // pdt('set', 'piPoints', 500000);
    // pdt(function (tracker) {
    //   let gettitle = tracker.get("title");
    //   let geturl = tracker.get("url");
    //   console.log(gettitle, geturl);
    // });

    // Getを使ってみよう！
    pdt(function (tracker) {
      // let status = tracker.getConsentStatus();
      let title = tracker.get("title");
      let url = tracker.get("url");
      let referrer = tracker.get("referrer");
      let piEmail = tracker.get("piEmail");
      let utmCampaign = tracker.get("utmCampaign");
      console.log(status, title, url, referrer, piEmail, utmCampaign);
    });
    console.log('3');


    // ページビューの送信
    pdt('sendPageView');


    // SPAなど。クリックをトリガーにPageViewを記録
  </script>
  <!-- example menu navigation -->
  <a href="#titleh1" class="navigation-link">Homeへ戻る</a>
  <a href="#titleh1" class="navigation-link">Aboutなんてない</a>
  <!-- end example menu navigation -->

  <!-- your page content -->

  <script>
    (function () {
      // Update the tracked page title and send a page view to Account Engagement
      function trackView(pageTitle) {
        pdt('set', 'title', pageTitle);
        // pdt('sendPageView');
      }

      // Add event listeners for clicks on navigation links
      // Clicks on these links will send page views to Account Engagement
      // let navLinks = document.getElementsByClassName('navigation-link');
      // for (let i = 0; i < navLinks.length; i++) {
      //   navLinks[i].addEventListener('click', trackView(navLinks[i].text), false);
      //   console.log("addEventしました");
      // }
    })();
  </script>


</body>
</html>
